{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/js/engine.js","src/js/flow.js","src/js/index.js","src/js/sprite.js","src/js/state.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","Engine","_this","this","_classCallCheck","_defineProperty","_state","id","states","push","console","log","forEach","init","_speed","interval","setInterval","move","clearInterval","_sprite2","Flow","_path","_velocity","_sprite","sprites","_icon","_gutter","_amount","Sprite","concat","parrentState","innerHTML","flowItem","document","getElementById","path","alert","first","x","y","second","index","icon","gutter","curDirection","direction","_el","prevSpriteStep","pathStep","nextSpriteStep","tick","el","getNextPathStep","transform","isMove","velocity","_rotate","arguments","undefined","style","_engine","_flow","recicleFlow","wasteFlow","couplesFlow","gasFlow","condensateFlow","couplesFlow2","electricityFlow","ashFlow","slagFlow","addSprites","recicleState","State","bunkerState","burnState","capacitorState","turboState","filterState","addFlow","engine","addState","render","_id","flows"],"mappings":"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","file":"main.min.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","import {State} from './state.js';\r\n\r\nexport class Engine {\r\n  states = [];\r\n  interval = null;\r\n  constructor() {\r\n    \r\n  }\r\n  addState = (_state) => {\r\n    if(_state.id) {\r\n      this.states.push(_state);\r\n    }\r\n  }\r\n  init = () => {\r\n    console.log(\"engine.init()..\");\r\n    this.states.forEach(e => {\r\n      e.init();\r\n    }); \r\n    console.log(\"engine.init() done\");\r\n  }\r\n  render = (_speed) => {\r\n    console.log(\"engine.render()..\");\r\n    this.interval = setInterval(() => {\r\n      this.states.forEach(e => {\r\n        if(e.move() == false) clearInterval(this.interval);\r\n      }); \r\n    }, 100/_speed);\r\n  }\r\n  stop = () => {\r\n    console.log(\"engine.stop()\");\r\n    clearInterval(this.interval);\r\n  }\r\n}","import {Sprite} from './sprite.js';\r\n\r\nexport class Flow {\r\n  id;\r\n  sprites = [];\r\n  path = [];\r\n  parrentState;\r\n  //split = 0;\r\n  isMove = true;\r\n  velocity;\r\n  tick;\r\n\r\n  constructor(_path, _velocity, _split = 0) {\r\n    this.path = _path;\r\n    //this.split = _split;\r\n    this.velocity = 100/_velocity;\r\n    this.tick = this.velocity;\r\n  }\r\n  addSprite = (_sprite) => {\r\n    if(_sprite) {\r\n      this.sprites.push(_sprite);\r\n    }\r\n  }\r\n  addSprites = (_icon, _gutter, _amount) => {\r\n    for(let i = 0; i < _amount; i++) {\r\n      this.sprites.push(new Sprite(_icon, _gutter));\r\n    }\r\n  }\r\n  init = () => {\r\n    console.log(`     flow ${this.id}.init()..`);\r\n    console.log(\"         sprites.init()..\");\r\n    this.parrentState.innerHTML += `<div class=\"flows__item\" id=\"${this.id}\"></div>`;\r\n    const flowItem = document.getElementById(this.id);\r\n\r\n    if(this.path.length < 2) {\r\n      alert('Задан слишком короткий путь!');\r\n    } else {\r\n      const first = { x: this.path[0].x, y: this.path[0].y };\r\n      const second = { x: this.path[1].x, y: this.path[1].y };\r\n\r\n      this.sprites.forEach((e, index) => {\r\n        flowItem.innerHTML += `<span class=\"${e.icon}\" id=\"${this.id}_${index}\"></span>`;\r\n        e.id = `${this.id}_${index}`;\r\n        if(first.x > second.x) {\r\n          if(index == 0) {\r\n            e.x = -e.gutter;\r\n          } else {\r\n            e.x = (e.gutter * (index - 1));\r\n          }\r\n          e.y = this.path[0].y;\r\n          e.curDirection = 2; \r\n          e.direction = 2; \r\n        } else if(first.x < second.x) {\r\n          if(index == 0) {\r\n            e.x = e.gutter;\r\n          } else {\r\n            e.x = -(e.gutter * (index - 1));\r\n          }\r\n          e.y = this.path[0].y;\r\n          e.curDirection = 0; \r\n          e.direction = 0; \r\n        } else if(first.y > second.y) {\r\n          if(index == 0) {\r\n            e.y = e.gutter;\r\n          } else {\r\n            e.y = (e.gutter * (index - 1));\r\n          }\r\n          e.x = this.path[0].x;\r\n          e.curDirection = 3; \r\n          e.direction = 3; \r\n        } else if(first.y < second.y) {\r\n          if(index == 0) {\r\n            e.y = e.gutter;\r\n          } else {\r\n            e.y = -(e.gutter * (index - 1));\r\n          }\r\n          e.x = first.x;\r\n          e.curDirection = 1; \r\n          e.direction = 1; \r\n        } \r\n      });\r\n    }\r\n    console.log(\"         sprites.init() done\");\r\n    console.log(`     flow ${this.id}.init() done`);\r\n  }\r\n\r\n  getPrevPathStep = (_el) => {\r\n    const prevSpriteStep = _el.pathStep - 1;\r\n    if(prevSpriteStep < 0) {\r\n      return false;\r\n    } \r\n    return this.path[prevSpriteStep];\r\n  }\r\n\r\n  getNextPathStep = (_el) => {\r\n    const nextSpriteStep = _el.pathStep + 1;\r\n    if(nextSpriteStep >= (this.path.length)) {\r\n      return false;\r\n    }\r\n    return this.path[nextSpriteStep];    \r\n  }\r\n\r\n  transform(_el, _rotate = 0, _mirror = false) {\r\n    if(_mirror) {\r\n      _el.el().style.transform = `translate(${_el.x}px, ${_el.y}px) rotate(${_rotate}deg)`;\r\n    } else {\r\n      _el.el().style.transform = `translate(${_el.x}px, ${_el.y}px) rotate(${_rotate}deg)`;\r\n    }\r\n  }\r\n  move = () => {\r\n    if(this.tick <= 0) {\r\n      this.sprites.forEach((el, index) => {\r\n        if(!this.getNextPathStep(el)) {\r\n          this.isMove = false;\r\n          el.pathStep = 0;\r\n          el.x = this.path[0].x;\r\n          el.y = this.path[0].y;\r\n          el.curDirection = el.direction;\r\n        } else {\r\n          if(el.curDirection == 0) {\r\n            if(this.getNextPathStep(el).x >= el.x) {\r\n              if(el.x >= 0) {  \r\n                this.transform(el);    \r\n              }    \r\n            } else {\r\n              el.pathStep++;\r\n              if(this.getNextPathStep(el).y >= el.y) {\r\n                el.curDirection = 1;\r\n              } else {\r\n                el.curDirection = 3;\r\n              }\r\n            }\r\n            el.x++;\r\n          } else if(el.curDirection == 1) {\r\n            if(this.getNextPathStep(el).y >= el.y) {\r\n              if(el.y >= 0) {\r\n                this.transform(el, 90);  \r\n              } \r\n            } else {\r\n              el.pathStep++;\r\n              if(this.getNextPathStep(el).x >= el.x) {\r\n                el.curDirection = 0;\r\n              } else {\r\n                el.curDirection = 2;\r\n              }\r\n            }\r\n            el.y++;\r\n          } else if(el.curDirection == 2) {\r\n            if(this.getNextPathStep(el).x <= el.x) {\r\n              if(el.x < 0) {\r\n                this.transform(el, 180);  \r\n              }  \r\n            } else {\r\n              el.pathStep++;\r\n              if(this.getNextPathStep(el).y <= el.y) {\r\n                el.curDirection = 3;\r\n              } else {\r\n                el.curDirection = 1;\r\n              }\r\n            }\r\n            el.x--;\r\n          } else if(el.curDirection == 3) {\r\n            if(this.getNextPathStep(el).y <= el.y) {\r\n              if(el.y < 0) {\r\n                this.transform(el, 270);  \r\n              } \r\n            } else {\r\n              el.pathStep++;\r\n              if(this.getNextPathStep(el).x <= el.x) {\r\n                el.curDirection = 2;\r\n              } else {\r\n                el.curDirection = 0;\r\n              }\r\n            }\r\n            el.y--;\r\n          }\r\n        }\r\n      });\r\n      this.tick = this.velocity;\r\n    } \r\n    this.tick--;\r\n  }\r\n}","import {Engine} from './engine.js';\r\nimport {State} from './state.js';\r\nimport {Flow} from './flow.js';\r\n\r\n//Пути\r\nconst reciclePath = [{x: 0, y: 0}, {x: 208, y: 0}],\r\n      wastePath = [{x: 0, y: 0}, {x: 144, y: 0}, {x: 144, y: 205}],\r\n      couplesPath = [{x: 19, y: 0},{x: 19, y: 99}, {x: 157, y: 99},{x: 157,y: 175}],\r\n      gasPath = [{x: 21, y: 0},{x: 21, y: -209}, { x: 160, y: -209}],\r\n      condensatePath = [{x: 0, y: 0}, {x: 0, y: -96}, {x: 135, y: -96},{x: 135, y: -155}],\r\n      couplesPath2 = [{x: 0, y: 0}, {x: -275, y: 0}],\r\n      electricityPath = [{x: 0, y: 0}, {x: 195, y: 0}],\r\n      ashPath = [{x: 0, y: -13},{x: 195, y: -13}],\r\n      slagPath = [{x: 0, y: 0},{x: 350, y: 0}];\r\n\r\n//Создание потоков\r\n//path, velocity(0-100)\r\nconst recicleFlow = new Flow(reciclePath, 70),\r\n      wasteFlow = new Flow(wastePath, 40),\r\n      couplesFlow = new Flow(couplesPath, 50),\r\n      gasFlow = new Flow(gasPath, 40),\r\n      condensateFlow = new Flow(condensatePath, 30),\r\n      couplesFlow2 = new Flow(couplesPath2, 20),\r\n      electricityFlow = new Flow(electricityPath, 30),\r\n      ashFlow = new Flow(ashPath, 30),\r\n      slagFlow = new Flow(slagPath, 40);\r\n\r\n//Наполнение потоков спрайтами\r\n//icon, gutter, amount\r\nrecicleFlow.addSprites('icon-recicle-flow', 30, 7);\r\ncouplesFlow.addSprites('icon-couples', 40, 8);\r\ncouplesFlow2.addSprites('icon-couples', 35, 8, 8);\r\nelectricityFlow.addSprites('icon-flash-other', 25, 8);\r\nashFlow.addSprites('icon-filter-tube', 25, 8);\r\nwasteFlow.addSprites('icon-recicle-flow', 40, 9);\r\ngasFlow.addSprites('icon-smoke', 45, 9);\r\nslagFlow.addSprites('icon-burn-flow', 35, 10);\r\ncondensateFlow.addSprites('icon-condensate', 30, 11);\r\n\r\n// Создание позиции\r\nconst recicleState = new State('recicle'),\r\n      bunkerState = new State('bunker'),\r\n      burnState = new State('burn'),\r\n      capacitorState = new State('capacitor'),\r\n      turboState = new State('turbo'),\r\n      filterState = new State('filter');\r\n\r\n// Добавление потоков в позиции\r\nrecicleState.addFlow(recicleFlow);\r\nbunkerState.addFlow(wasteFlow);\r\nburnState.addFlow(couplesFlow);\r\nburnState.addFlow(gasFlow);\r\nburnState.addFlow(slagFlow);\r\ncapacitorState.addFlow(condensateFlow);\r\nturboState.addFlow(couplesFlow2);\r\nturboState.addFlow(electricityFlow);\r\nfilterState.addFlow(ashFlow);\r\n\r\n// Создание движка\r\nconst engine = new Engine();\r\n\r\n// Доавление позиции в движок\r\nengine.addState(recicleState);\r\nengine.addState(bunkerState);\r\nengine.addState(burnState);\r\nengine.addState(capacitorState);\r\nengine.addState(turboState);\r\nengine.addState(filterState);\r\n\r\n// Инициализация движка\r\nengine.init();\r\n\r\n// Рендер (скорость 0 - 100)\r\nengine.render(20);\r\n\r\n\r\n\r\n","export class Sprite {\r\n  id;\r\n  icon;\r\n  gutter;\r\n  pathStep = 0;\r\n  curDirection;\r\n  direction;\r\n  x = 0;\r\n  y = 0;\r\n  constructor(_icon, _gutter) {\r\n    this.icon = _icon;\r\n    this.gutter = _gutter;\r\n  }\r\n  el = () => {\r\n    return document.getElementById(this.id);\r\n  }\r\n}","import {Flow} from './flow.js';\r\n\r\nexport class State {\r\n  flows = [];\r\n  id;\r\n  constructor(_id) {\r\n    if(document.getElementById(_id)) {\r\n      this.id = _id;\r\n    } else {\r\n      console.log(`state ${this.id}.init() flow not found`);\r\n    }\r\n  }\r\n  addFlow(_flow) {\r\n    if(_flow) {\r\n      this.flows.push(_flow);\r\n    }\r\n  }\r\n  init() {\r\n    console.log(`   state ${this.id}.init()..`);\r\n    this.flows.forEach((e, index) => {\r\n      e.id = `${this.id}_${index}`;\r\n      e.parrentState = document.getElementById(this.id);\r\n      e.init();\r\n    });\r\n    console.log(`   state ${this.id}.init() done`);\r\n  }\r\n  move() {\r\n    this.flows.forEach(e => {\r\n      e.move();\r\n    });\r\n  }\r\n}"]}